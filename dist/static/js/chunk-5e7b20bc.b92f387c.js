(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e7b20bc"],{"0ccb":function(t,e,a){var n=a("50c4"),o=a("1148"),r=a("1d80"),i=Math.ceil,l=function(t){return function(e,a,l){var s,c,u=String(r(e)),m=u.length,p=void 0===l?" ":String(l),d=n(a);return d<=m||""==p?u:(s=d-m,c=o.call(p,i(s/p.length)),c.length>s&&(c=c.slice(0,s)),t?u+c:c+u)}};t.exports={start:l(!1),end:l(!0)}},1148:function(t,e,a){"use strict";var n=a("a691"),o=a("1d80");t.exports="".repeat||function(t){var e=String(o(this)),a="",r=n(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(a+=e);return a}},"38ea":function(t,e,a){"use strict";a("d5dd")},"4d90":function(t,e,a){"use strict";var n=a("23e7"),o=a("0ccb").start,r=a("9a0c");n({target:"String",proto:!0,forced:r},{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"5a5f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search-wrapper"},[a("div",{staticClass:"search-left"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"企业名称"}},[a("el-select",{style:{width:"300px"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入企业名","remote-method":t.remoteMethod,loading:t.loading},model:{value:t.form.entname,callback:function(e){t.$set(t.form,"entname",e)},expression:"form.entname"}},t._l(t.sel_options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"数据状态"}},[a("el-checkbox-group",{on:{change:t.checkboxGroupChange},model:{value:t.form.statusWord,callback:function(e){t.$set(t.form,"statusWord",e)},expression:"form.statusWord"}},[a("el-checkbox",{attrs:{label:"收到授权请求",name:"type"}}),a("el-checkbox",{attrs:{label:"授权书已生成",name:"type"}}),a("el-checkbox",{attrs:{label:"已提交给大象",name:"type"}}),a("el-checkbox",{attrs:{label:"可以取数据了",name:"type"}})],1)],1)],1)],1),a("div",{staticClass:"search-right"})]),a("div",{staticClass:"table-wrapper"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"法人姓名"}},[a("span",[t._v(t._s(e.row.legalPerson))])]),a("el-form-item",{attrs:{label:"法人手机"}},[a("span",[t._v(t._s(e.row.phone))])]),a("el-form-item",{attrs:{label:"百度api地址"}},[a("span",[t._v(t._s(e.row.province)+"-"+t._s(e.row.city)+"-"+t._s(e.row.county)+"-"+t._s(e.row.town))])]),a("el-form-item",{attrs:{label:"工商地址"}},[a("span",[t._v(t._s(e.row.regAddress))])]),a("el-form-item",{attrs:{label:"市行政区划"}},[a("span",[t._v(t._s(e.row.cityCode))])]),a("el-form-item",{attrs:{label:"授权书文件"}},[a("el-button",{attrs:{type:"success",size:"mini",plain:""},on:{click:function(a){return t.showAuthBook(e.row.filePath)}}},[t._v("查看授权书")])],1),a("el-form-item",{attrs:{label:"上次取数"}},[a("span",[t._v(t._s(e.row.lastReqTime))])]),a("el-form-item",{attrs:{label:"上次oss"}},[a("el-button",{attrs:{type:"success",size:"mini",plain:""},on:{click:function(a){return t.showOssUrl(e.row.lastReqUrl)}}},[t._v("下载上次数据 ")])],1)],1)]}}])}),a("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),a("el-table-column",{attrs:{align:"center",label:"企业名称",width:"300",prop:"entName"}}),a("el-table-column",{attrs:{align:"center",label:"统一代码",width:"220",prop:"socialCredit"}}),a("el-table-column",{attrs:{align:"center",label:"发起授权",prop:"requestDate"}}),a("el-table-column",{attrs:{align:"center",label:"授权书生成",prop:"authDate"}}),a("el-table-column",{attrs:{align:"center",label:"发出授权书",prop:"sendDate"}}),a("el-table-column",{attrs:{align:"center",label:"可以取数",prop:"canGetDataDate"}})],1),a("div",{staticStyle:{"margin-top":"20px","margin-right":"20px",float:"right"}},[a("el-button",{attrs:{type:"warning",round:""},on:{click:t.createGetDataTime}},[t._v("创建可以取数时间")]),a("el-button",{attrs:{type:"primary",round:""},on:{click:t.createZip}},[t._v("生成未授权的zip包")])],1)],1)])},o=[],r=(a("4160"),a("159b"),a("ed08")),i={name:"",inject:["reload"],components:{},props:{},data:function(){return{loading:!1,tableData:[],multipleSelection:[],form:{entname:"",statusWord:[],status:[]},sel_options:[]}},computed:{},mounted:function(){this.getIndex()},methods:{showAuthBook:function(t){window.location.href="https://api.meirixindong.com/Static/InvAuth/"+t},showOssUrl:function(t){window.location.href=t},checkboxGroupChange:function(){var t=this;this.form.status=[],this.form.statusWord.forEach((function(e){switch(e){case"收到授权请求":t.form.status.push(0);break;case"授权书已生成":t.form.status.push(1);break;case"已提交给大象":t.form.status.push(2);break;case"可以取数据了":t.form.status.push(3);break}})),this.form.status=JSON.stringify(this.form.status),this.getIndex()},remoteMethod:function(t){""!==t?(this.loading=!0,this.form.entname=t,this.getIndex()):this.options=[]},getIndex:function(){var t=this;this.$http.post("admin_provide/v1/invoice/getList",this.form).then((function(e){var a=e.data;t.sel_options=[],t.loading=!1,200===a.code&&(a.result.forEach((function(e){e.requestDate=Object(r["a"])(e.requestDate,"{y}-{m}-{d}"),e.authDate=Object(r["a"])(e.authDate,"{y}-{m}-{d}"),e.sendDate=Object(r["a"])(e.sendDate,"{y}-{m}-{d}"),e.getDataDate=Object(r["a"])(e.getDataDate,"{y}-{m}-{d}"),e.created_at=Object(r["a"])(e.created_at,"{y}-{m}-{d}"),e.updated_at=Object(r["a"])(e.updated_at,"{y}-{m}-{d}"),e.canGetDataDate=Object(r["a"])(e.canGetDataDate,"{y}-{m}-{d}"),e.lastReqTime=Object(r["a"])(e.lastReqTime),t.sel_options.push({label:e.entName,value:e.entName})})),t.tableData=a.result)})).catch((function(t){console.log(t)}))},toggleSelection:function(t){var e=this;t?t.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){this.multipleSelection=t},createZip:function(){var t=this;this.$http.post("admin_provide/v1/invoice/createZip",{zip_arr:this.multipleSelection}).then((function(e){var a=e.data;a.result.length>5?(window.location.href="https://api.meirixindong.com/Static/Temp/"+a.result+".zip",t.getIndex()):t.$message.success("未发现未发送的企业")})).catch((function(t){console.error(t)}))},createGetDataTime:function(){var t=this;this.multipleSelection.length<=0?this.$message.error("未选择企业"):this.$confirm("确定更改？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.post("admin_provide/v1/invoice/createGetDataTime",{ent_arr:t.multipleSelection}).then((function(e){e.data;t.getIndex()})).catch((function(t){console.error(t)}))})).catch((function(){}))}}},l=i,s=(a("38ea"),a("2877")),c=Object(s["a"])(l,n,o,!1,null,"5284b502",null);e["default"]=c.exports},"9a0c":function(t,e,a){var n=a("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},d5dd:function(t,e,a){},ed08:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("4160"),a("c975"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("4d90"),a("5319"),a("1276"),a("159b"),a("a4d3"),a("e01a"),a("d28b"),a("3ca3"),a("ddb0");function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){if(0===arguments.length||!t)return null;var a,o=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===n(t)?a=t:("string"===typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"===typeof t&&10===t.toString().length&&(t*=1e3),a=new Date(t));var r={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},i=o.replace(/{([ymdhisa])+}/g,(function(t,e){var a=r[e];return"a"===e?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")}));return i}}}]);